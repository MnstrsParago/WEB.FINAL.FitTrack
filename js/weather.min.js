document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("weatherInfo");if(t){if(!navigator.geolocation){t.textContent="Geolocation is not supported by your browser.";return}navigator.geolocation.getCurrentPosition(async e=>{let a=e.coords.latitude,n=e.coords.longitude;try{let r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${n}&appid=d87aaed761f65e8277c3ea1d3aa91382&units=metric`);if(!r.ok)throw Error("Weather data not available.");let o=await r.json(),i=o.main.temp,s=o.weather[0].description,l=o.name,g=o.weather[0].icon;t.innerHTML=`
          <i class="fas fa-map-marker-alt"></i> <strong>${l}</strong> â€” 
          <img src="https://openweathermap.org/img/wn/${g}@2x.png" alt="${s}" style="vertical-align: middle;" />
          <strong>${i}\xb0C</strong>, ${s}
        `}catch(c){t.classList.replace("alert-info","alert-danger"),t.textContent=`Error fetching weather: ${c.message}`}},e=>{t.classList.replace("alert-info","alert-warning"),t.textContent="Unable to get your location."})}});const weatherDiv=document.getElementById("weatherDetails");weatherDiv.innerHTML=`
  <strong>${city}</strong>
  <span>
    <img src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="${desc}" style="vertical-align: middle;" />
    <strong>${temp}\xb0C</strong>, ${desc}
  </span>
`;